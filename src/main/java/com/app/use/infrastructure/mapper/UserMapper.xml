<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.app.use.infrastructure.dao.UserDao">

  <resultMap id="UserMap" type="com.app.use.entity.User" >
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="authority" property="authority" jdbcType="VARCHAR" />
    <result column="image_icon" property="imageIcon" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="error_count" property="errorCount" jdbcType="VARCHAR" />
  </resultMap>

  <select id="findById" parameterType="string" resultType="com.app.use.entity.User">
    SELECT
    	*
    FROM
    	user
    WHERE
    	id = #{id}
  </select>

  <update id="update" parameterType="com.app.use.entity.User">
	UPDATE user
	SET
	<if test="name != null">
	  name = #{name},
	</if>
	<!-- TODO 後ほど修正予定...(●´ω｀●)ゞてへぺろ
	<if test="authority != null">
	  authority = #{authority},
	</if>
	<if test="imageIcon != null">
	  image_icon = #{imageIcon},
	</if>
	<if test="password != null">
	  password = #{password],
	</if>
	<if test="errorCount != null">
	  error_count = #{errorCount},
	</if>
	-->
	  update_date = NOW()
	WHERE
	  id = #{id}
  </update>

  <update id="updateIosUdid" parameterType="com.app.use.entity.User">
	UPDATE user
	SET
	<if test="ios_udid != null">
	  ios_udid = #{ios_udid},
	</if>
	  update_date = NOW()
	WHERE
	  id = #{id}
  </update>
</mapper>